!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e=e||self,e.getBaseInfo=n())}(this,function(){"use strict";var e={Cookie:{write:function(e,n,t,i,r,o){/^\w*$/.test(e)||alert("cookie格式不正确"),/; /.test(n)&&alert("cookie格式不正确");var a=e+"="+n;if(t){var l=new Date;l.setTime(l.getTime()+1e3*t),a+="; expires="+l.toGMTString()}i&&(a+="; path="+i),r&&(a+="; domain="+r),o&&(a+="; secure"),document.cookie=a},rewriteKey:function(e,n,t,i,r,o,a){var l=n;if(t){var s=this.read(e),c=new RegExp("\\b"+n+"=([^&]*)\\b","g");l=s.replace(c,function(e,n){return e.replace(n,t)})}/^\d+(s|m|h|d)$/i.test(i)?(/^\d+s$/i.test(i)&&this.setSec(e,l,i.replace(/s$/i,""),r,o,a),/^\d+m$/i.test(i)&&this.setMin(e,l,i.replace(/m$/i,""),r,o,a),/^\d+h$/i.test(i)&&this.setHour(e,l,i.replace(/h$/i,""),r,o,a),/^\d+d$/i.test(i)&&this.setDay(e,l,i.replace(/d$/i,""),r,o,a)):this.write(e,l,i,r,o,a)},setDay:function(e,n,t,i,r,o){this.write(e,n,24*t*60*60,i,r,o)},setHour:function(e,n,t,i,r,o){this.write(e,n,60*t*60,i,r,o)},setMin:function(e,n,t,i,r,o){this.write(e,n,60*t,i,r,o)},setSec:function(e,n,t,i,r,o){this.write(e,n,t,i,r,o)},read:function(n,t,i){for(var r="",o=document.cookie.split("; "),a=0;a<o.length;a++){var l=o[a].match(/^(\w+)=(.+)$/);if(l&&l.length>1&&l[1]==n){r=l[2];break}}return""==r?null:t?i?JSON.parse(r)[t]:(new e.Param).parse(r)[t]:r},remove:function(e,n,t){var i=e+"=";n&&(i+="; path="+n),t&&(i+=";domain="+t),i+="; expires=Fri, 02-Jan-1970 00:00:00 GMT",document.cookie=i}},Md5:function(e){function n(e,n){e[n>>5]|=128<<n%32,e[14+(n+64>>>9<<4)]=n;for(var t=1732584193,s=-271733879,c=-1732584194,u=271733878,d=0;d<e.length;d+=16){var f=t,m=s,g=c,p=u;s=a(s=a(s=a(s=a(s=o(s=o(s=o(s=o(s=r(s=r(s=r(s=r(s=i(s=i(s=i(s=i(s,c=i(c,u=i(u,t=i(t,s,c,u,e[d+0],7,-680876936),s,c,e[d+1],12,-389564586),t,s,e[d+2],17,606105819),u,t,e[d+3],22,-1044525330),c=i(c,u=i(u,t=i(t,s,c,u,e[d+4],7,-176418897),s,c,e[d+5],12,1200080426),t,s,e[d+6],17,-1473231341),u,t,e[d+7],22,-45705983),c=i(c,u=i(u,t=i(t,s,c,u,e[d+8],7,1770035416),s,c,e[d+9],12,-1958414417),t,s,e[d+10],17,-42063),u,t,e[d+11],22,-1990404162),c=i(c,u=i(u,t=i(t,s,c,u,e[d+12],7,1804603682),s,c,e[d+13],12,-40341101),t,s,e[d+14],17,-1502002290),u,t,e[d+15],22,1236535329),c=r(c,u=r(u,t=r(t,s,c,u,e[d+1],5,-165796510),s,c,e[d+6],9,-1069501632),t,s,e[d+11],14,643717713),u,t,e[d+0],20,-373897302),c=r(c,u=r(u,t=r(t,s,c,u,e[d+5],5,-701558691),s,c,e[d+10],9,38016083),t,s,e[d+15],14,-660478335),u,t,e[d+4],20,-405537848),c=r(c,u=r(u,t=r(t,s,c,u,e[d+9],5,568446438),s,c,e[d+14],9,-1019803690),t,s,e[d+3],14,-187363961),u,t,e[d+8],20,1163531501),c=r(c,u=r(u,t=r(t,s,c,u,e[d+13],5,-1444681467),s,c,e[d+2],9,-51403784),t,s,e[d+7],14,1735328473),u,t,e[d+12],20,-1926607734),c=o(c,u=o(u,t=o(t,s,c,u,e[d+5],4,-378558),s,c,e[d+8],11,-2022574463),t,s,e[d+11],16,1839030562),u,t,e[d+14],23,-35309556),c=o(c,u=o(u,t=o(t,s,c,u,e[d+1],4,-1530992060),s,c,e[d+4],11,1272893353),t,s,e[d+7],16,-155497632),u,t,e[d+10],23,-1094730640),c=o(c,u=o(u,t=o(t,s,c,u,e[d+13],4,681279174),s,c,e[d+0],11,-358537222),t,s,e[d+3],16,-722521979),u,t,e[d+6],23,76029189),c=o(c,u=o(u,t=o(t,s,c,u,e[d+9],4,-640364487),s,c,e[d+12],11,-421815835),t,s,e[d+15],16,530742520),u,t,e[d+2],23,-995338651),c=a(c,u=a(u,t=a(t,s,c,u,e[d+0],6,-198630844),s,c,e[d+7],10,1126891415),t,s,e[d+14],15,-1416354905),u,t,e[d+5],21,-57434055),c=a(c,u=a(u,t=a(t,s,c,u,e[d+12],6,1700485571),s,c,e[d+3],10,-1894986606),t,s,e[d+10],15,-1051523),u,t,e[d+1],21,-2054922799),c=a(c,u=a(u,t=a(t,s,c,u,e[d+8],6,1873313359),s,c,e[d+15],10,-30611744),t,s,e[d+6],15,-1560198380),u,t,e[d+13],21,1309151649),c=a(c,u=a(u,t=a(t,s,c,u,e[d+4],6,-145523070),s,c,e[d+11],10,-1120210379),t,s,e[d+2],15,718787259),u,t,e[d+9],21,-343485551),t=l(t,f),s=l(s,m),c=l(c,g),u=l(u,p)}return Array(t,s,c,u)}function t(e,n,t,i,r,o){return l(s(l(l(n,e),l(i,o)),r),t)}function i(e,n,i,r,o,a,l){return t(n&i|~n&r,e,n,o,a,l)}function r(e,n,i,r,o,a,l){return t(n&r|i&~r,e,n,o,a,l)}function o(e,n,i,r,o,a,l){return t(n^i^r,e,n,o,a,l)}function a(e,n,i,r,o,a,l){return t(i^(n|~r),e,n,o,a,l)}function l(e,n){var t=(65535&e)+(65535&n);return(e>>16)+(n>>16)+(t>>16)<<16|65535&t}function s(e,n){return e<<n|e>>>32-n}function c(e){for(var n=Array(),t=(1<<d)-1,i=0;i<e.length*d;i+=d)n[i>>5]|=(e.charCodeAt(i/d)&t)<<i%32;return n}function u(e){for(var n="",t=0;t<4*e.length;t++)n+="0123456789abcdef".charAt(e[t>>2]>>t%4*8+4&15)+"0123456789abcdef".charAt(e[t>>2]>>t%4*8&15);return n}var d=8;return e=e?function(e){return u(n(c(e),e.length*d))}(e):""},Param:function(){var e=[],n={};this.parse=function(e){for(var t=e.split("&"),i=0,r=t.length;i<r;i++){var o=t[i].split("=");n[o[0]]=o[1]}return n},this.toString=function(n){return n=n||"&",e.join(n)},this.add=function(n,t){var i=n+"="+t;return e.push(i),this}},IsEmpty:function(e){return void 0===e||null==e||""==e},Guid:function(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},getKgMid:function(){var n=e.Cookie.read("kg_mid");if(navigator.cookieEnabled){if(e.IsEmpty(n)){var t=e.Guid();n=e.Md5(t);try{e.Cookie.write("kg_mid",e.Md5(t),864e6,"/","kugou.com")}catch(e){}}}else{var i=navigator.userAgent,r=function(){var e=navigator.plugins,n="";if(e.length>0){for(var t=[],i=0,r=e.length;i<r;i++){var o=e[i].name;t.push(o)}n=t.toString()}return n}(),o=screen.width+"x"+screen.height,a=screen.colorDepth?screen.colorDepth:"",l=screen.pixelDepth?screen.pixelDepth:"",s=function(){var n=["canvas"];try{var t=document.createElement("canvas");if(t.getContext&&t.getContext("2d")){t.width=200,t.height=200,t.style.display="inline";var i=t.getContext("2d");i.rect(0,0,10,10),i.rect(2,2,6,6),n.push("canvas winding:"+(!1===i.isPointInPath(5,5,"evenodd")?"yes":"no")),i.textBaseline="alphabetic",i.fillStyle="#f60",i.fillRect(125,1,62,20),i.fillStyle="#069",i.font="14px 'Arial'",i.fillText("hello kugou",2,15),i.fillStyle="rgba(102, 204, 0, 0.2)",i.font="18pt Arial",i.fillText("hello kugou",4,45),i.globalCompositeOperation="multiply",i.fillStyle="rgb(255,0,255)",i.beginPath(),i.arc(50,50,50,0,2*Math.PI,!0),i.closePath(),i.fill(),i.fillStyle="rgb(0,255,255)",i.beginPath(),i.arc(100,50,50,0,2*Math.PI,!0),i.closePath(),i.fill(),i.fillStyle="rgb(255,255,0)",i.beginPath(),i.arc(75,100,50,0,2*Math.PI,!0),i.closePath(),i.fill(),i.fillStyle="rgb(255,0,255)",i.arc(75,75,75,0,2*Math.PI,!0),i.arc(75,75,25,0,2*Math.PI,!0),i.fill("evenodd"),t.toDataURL&&n.push("canvas fp:"+t.toDataURL())}}catch(e){}return e.Md5(n.toString())}();n=e.Md5(i+r+o+a+l+s)}return n},isiOS:function(){var e=navigator.userAgent,n=e.match(/(iPad).*OS\s([\d_]+)/),t=e.match(/(iPod)(.*OS\s([\d_]+))?/),i=!n&&e.match(/(iPhone\sOS)\s([\d_]+)/);return!!(n||t||i)}},n=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self,function(e,n){return n={exports:{}},e(n,n.exports),n.exports}(function(e,n){!function(n,t){e.exports=function(){var e={str2Json:function(e){var n={};if("[object String]"===Object.prototype.toString.call(e))try{n=JSON.parse(e)}catch(e){n={}}return n},json2Str:function(e){var n=e;if("string"!=typeof e)try{n=JSON.stringify(e)}catch(e){n=""}return n},cbNum:0,isIOS:!!navigator.userAgent.match(/KGBrowser/gi),isKugouAndroid:!!navigator.userAgent.match(/kugouandroid/gi),isAndroid:"undefined"!=typeof external&&void 0!==external.superCall,isFXAPP:!!navigator.userAgent.match(/Fanxing/gi),isFXQianBanAPP:!!navigator.userAgent.match(/QianBan/gi),isIframePage:window.parent&&window.parent!=window,loadUrl:function(e){var n=document.createElement("iframe");n.setAttribute("src",e),n.setAttribute("style","display:none;"),n.setAttribute("height","0px"),n.setAttribute("width","0px"),n.setAttribute("frameborder","0"),document.body.appendChild(n),n.parentNode.removeChild(n),n=null},mobileCallInIframe:function(e,n,t){var i={type:"KgMobileCall",cmd:e};n&&(i.dataJson=n),t&&(i.cbName=t),i.source="personal",window.parent.postMessage(i,"*")},receiveMessage:function(e){var n=e.data;if("KgMobileCall"==n.type&&window[n.cbName]&&(n.dataJson?window[n.cbName](n.dataJson):window[n.cbName](),window[n.cbName]=null),"KgWebMobileCall"==n.type){var t=n.funcName.split(".");KgWebMobileCall[t[1]]&&(n.dataJson?KgWebMobileCall[t[1]](n.dataJson):KgWebMobileCall[t[1]]())}},callCmd:function(n){var t=e;if(t.isKugouAndroid){var i={},r="";if(n.cmd&&(i.cmd=n.cmd),n.jsonStr&&(i.jsonStr=n.jsonStr),n.callback&&(t.cbNum++,r="kgandroidmobilecall_"+(n.cmd||0)+"_"+t.cbNum+Math.random().toString().substr(2,9),i.callback=r,window[r]=function(e,i){void 0!==e&&("[object String]"===Object.prototype.toString.call(e)?(e="#"===i?decodeURIComponent(e):decodeURIComponent(decodeURIComponent(e)),n.callback(t.str2Json(e))):n.callback(e))}),n.AndroidCallback){var o=t.str2Json(n.jsonStr);o.AndroidCallback=r,n.jsonStr=t.json2Str(o),n.jsonStr&&(i.jsonStr=n.jsonStr)}var a=encodeURIComponent(JSON.stringify(i)),l="kugoujsbridge://start.kugou_jsbridge/?".concat(a);t.isIframePage?t.mobileCallInIframe(i.cmd,i.jsonStr,r):t.loadUrl(l)}else if(t.isAndroid){var s="",c="";if(n.jsonStr){if(n.callback&&""!==n.callback&&!0===n.AndroidCallback){t.cbNum++,c="kgmobilecall_"+(n.cmd||0)+"_"+t.cbNum+Math.random().toString().substr(2,9),window[c]=function(e,i){void 0!==e&&("[object String]"===Object.prototype.toString.call(e)?(e="#"===i?decodeURIComponent(e):decodeURIComponent(decodeURIComponent(e)),n.callback(t.str2Json(e))):n.callback(e))};var u=t.str2Json(n.jsonStr);u.AndroidCallback=c,n.jsonStr=t.json2Str(u)}if(t.isIframePage&&n.AndroidCallback)t.mobileCallInIframe(n.cmd,n.jsonStr,c);else try{s=external.superCall(n.cmd,n.jsonStr)}catch(e){}}else try{s=external.superCall(n.cmd)}catch(e){}(!t.isIframePage||t.isIframePage&&!n.AndroidCallback)&&n.callback&&""!==n.callback&&"AndroidCallback"!=s&&(s=t.str2Json(s),n.callback(s))}else if(t.isFXAPP||t.isFXQianBanAPP){var d="",f="";if(n.callback?(t.cbNum++,f="kgmobilecall_"+(n.cmd||0)+"_"+t.cbNum+Math.random().toString().substr(2,9),window[f]=function(e){void 0!==e&&n.callback&&("[object String]"===Object.prototype.toString.call(e)?n.callback(t.str2Json(e)):n.callback(e))},d=n.jsonStr?'fanxing2://send.message/?{"cmd":'+n.cmd+', "jsonStr":'+n.jsonStr+', "callback":"'+f+'"}':'fanxing2://send.message/?{"cmd":'+n.cmd+', "callback":"'+f+'"}'):d=n.jsonStr?'fanxing2://send.message/?{"cmd":'+n.cmd+', "jsonStr":'+n.jsonStr+"}":'fanxing2://send.message/?{"cmd":'+n.cmd+"}",t.isIframePage)t.mobileCallInIframe(n.cmd,n.jsonStr,f);else if(navigator.userAgent.match(/(Android);?[\s\/]+([\d.]+)?/))if(external&&external.callFanxing){var m={cmd:n.cmd,jsonStr:n.jsonStr||"",callback:f};external.callFanxing(JSON.stringify(m))}else window.prompt(d);else t.loadUrl(d)}else{var g="",p="";n.callback&&(t.cbNum++,p="kgmobilecall_"+(n.cmd||0)+"_"+t.cbNum+Math.random().toString().substr(2,9),window[p]=function(e){void 0!==e&&n.callback&&("[object String]"===Object.prototype.toString.call(e)?n.callback(t.str2Json(e)):n.callback(e))}),p&&""!=p&&n.jsonStr&&(g='kugouurl://start.music/?{"cmd":'+n.cmd+', "jsonStr":'+n.jsonStr+', "callback":"'+p+'"}'),p&&""!=p&&!n.jsonStr&&(g='kugouurl://start.music/?{"cmd":'+n.cmd+', "callback":"'+p+'"}'),""==p&&n.jsonStr&&(g='kugouurl://start.music/?{"cmd":'+n.cmd+', "jsonStr":'+n.jsonStr+"}"),""!=p||n.jsonStr||(g='kugouurl://start.music/?{"cmd":'+n.cmd+"}"),t.isIframePage?t.mobileCallInIframe(n.cmd,n.jsonStr,p):t.loadUrl(g)}}},n={isIOS:e.isIOS,isKugouAndroid:e.isKugouAndroid,isAndroid:e.isAndroid,isFXAPP:e.isFXAPP,isFXQianBanAPP:e.isFXQianBanAPP,isInClient:function(){return!!(e.isAndroid||e.isKugouAndroid||e.isIOS||e.isFXAPP||e.isFXQianBanAPP)},mobileCall:function(n,t,i){var r="";if(t&&(r=e.json2Str(t)),!n)return console.error("请输入命令号！"),!1;var o={};n&&(o.cmd=n),""!=r&&(o.jsonStr=r),i&&(o.callback=i),!n||186!=n&&225!=n||i&&(o.AndroidCallback=!0),e.callCmd(o)},KgWebMobileCall:function(n,t){if(n)try{e.isIframePage&&window.parent.postMessage({type:"KgWebMobileCall",funcName:n},"*");var i=n.split(".");i.reduce(function(e,r){if(e[r]){if(r===i[i.length-1]){var o=e[r];return"function"==typeof o?(e[r]=function(){o&&o.apply(void 0,arguments),t&&t.apply(void 0,arguments)},e[r]):(console.error("请检查，当前环境变量已注册了对象："+n+"，且该对象不是方法"),null)}return e[r]}return r===i[i.length-1]?e[r]=function(){t&&t.apply(void 0,arguments)}:e[r]=new Object,e[r]},window)}catch(e){}}};return window.addEventListener("message",function(n){e.receiveMessage(n)},!1),n}()}()}));return function(t,i){var r={getUserInfo:101,getVersion:122,getMobileInfo:124},o={appid:null,mid:null,uuid:null,plat:null,dfid:null,userid:null,userpic:null,userNickName:null,token:null,clientver:null};if(n.isInClient()&&!n.isFXAP)n.mobileCall(r.getUserInfo,null,function(e){1==e.status?(o.userid=e.kugouID,o.token=e.token,o.userpic=e.photo,o.userNickName=e.nickName,o.isVIP=e.isVIP||e.isVip):(o.userid=null,o.token=null,o.userpic=null,o.userNickName=null),o.appid=e.appid,n.mobileCall(r.getVersion,null,function(e){o.clientver=e.version,n.mobileCall(r.getMobileInfo,null,function(e){o.mid=e.mid_v2?e.mid_v2:e.mid,o.dfid=e.dfid?e.dfid:"-",o.uuid=e.uuid?e.uuid:o.mid,o.osVersion=e.osVersion?e.osVersion:"",n.isIOS?o.plat=2:o.plat=1,i&&i(o)})})});else if(n.isInClient()&&n.isFXAP)n.mobileCall(625,null,function(t){var r=JSON.parse(t.jsonStr);o.clientver=r.version,o.mid=r.mid,o.uuid=r.uuid?r.uuid:o.mid,o.dfid=r.dfid?r.dfid:"-",o.appid=r.appId,e.isiOS()?o.plat=2:o.plat=1,n.mobileCall(410,null,function(e){1==JSON.parse(e.jsonStr).status?n.mobileCall(411,{},function(e){var n=JSON.parse(e.jsonStr).jsonStr?JSON.parse(e.jsonStr).jsonStr:JSON.parse(e.jsonStr);o.userid=n.kugouId,o.token=n.token,o.pic=n.userLogo,o.nickName=n.nickName,i&&i(o)}):(o.userid=null,o.token=null,o.userpic=null,o.userNickName=null,i&&i(o))})});else{o.appid=t||null,o.mid=e.getKgMid(),o.uuid=o.mid,o.plat=4,o.dfid=e.Cookie.read("kg_dfid")||"-",o.userid=e.Cookie.read("KuGoo","KugooID"),o.userpic=e.Cookie.read("KuGoo","Pic"),o.userNickName=e.Cookie.read("KuGoo","NickName"),o.token=e.Cookie.read("KuGoo","t");var a=e.Cookie.read("KuGoo","a_id");a&&a!=o.appid&&o.appid&&(o.userid=null,o.token=null,o.userpic=null,o.userNickName=null),o.clientver=1e3,o.userNickName=o.userNickName?unescape(o.userNickName):"",i&&i(o)}}});
//# sourceMappingURL=main.min.js.map
