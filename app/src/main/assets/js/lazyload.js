function Lazyload(option){this.setOption(option);var imgs=document.images;var _this=this;this.lazyImgs=[];this.push();if(this.option.scroll){this.timer=setInterval(function(){var l=_this.lazyImgs.length;var size=Kg.getBodySize();var arr=[];if(_this.option.iframe){var iframe=parent.document.getElementById(_this.option.iframeId);for(var i=0;i<_this.lazyImgs.length;i++){if(_this.lazyImgs[i].offsetHeight<=0)continue;if((_this.lazyImgs[i].getBoundingClientRect().top+iframe.getBoundingClientRect().top)<=(iframe.parentNode.clientHeight-1+iframe.parentNode.getBoundingClientRect().top)){arr.push(_this.lazyImgs[i]);_this.lazyImgs.splice(i,1);i--;continue}}}else{for(var i=0;i<_this.lazyImgs.length;i++){if(_this.lazyImgs[i].offsetHeight<=0)continue;if(_this.lazyImgs[i].getBoundingClientRect().top<=(size.cH-1)){arr.push(_this.lazyImgs[i]);_this.lazyImgs.splice(i,1);i--;continue}}}_this.loadPic(arr)},100)}else{this.loadPic(this.lazyImgs)}};Lazyload.prototype.push=function(arr){var imgs=document.images;var _this=this;for(var i=0;i<imgs.length;i++){var relSrc=imgs[i].getAttribute(this.option.realSrc);relSrc=window.replaceHttpsImg?window.replaceHttpsImg(relSrc):relSrc;if(relSrc!=undefined&&(relSrc!=imgs[i].src)){this.lazyImgs.push(imgs[i]);imgs[i].onerror=function(){this.onerror=null;var defSrc=this.getAttribute(_this.option.defaultSrc);if(defSrc)this.src=defSrc;this.className=this.className.replace(/\bload\b/g,"");this.setAttribute("iserror",1)};imgs[i].onload=function(){if((window.replaceHttpsImg?window.replaceHttpsImg(this.getAttribute(_this.option.realSrc)):this.getAttribute(_this.option.realSrc))==this.src||(this.getAttribute("iserror")!=1&&this.getAttribute(_this.option.defaultSrc,2)==this.getAttribute("src",2))){this.className=this.className.replace(/\bload\b/g,"");if(_this.option.fadeIn){Kg.setOpacity(this,0);Kg.fadein(this,1,7,function(o){o.style.filter="";o.style.opacity=""})}}}}}};Lazyload.prototype.loadPic=function(arr){for(var i=0,l=arr.length;i<l;i++){if(arr[i].getAttribute("loading")==1)continue;arr[i].src=(window.replaceHttpsImg?window.replaceHttpsImg(arr[i].getAttribute(this.option.realSrc)):arr[i].getAttribute(this.option.realSrc))||arr[i].getAttribute(this.option.defaultSrc)||"";arr[i].setAttribute("loading",1)}};Lazyload.prototype.setOption=function(option){this.option={realSrc:"_src",defaultSrc:"_def",scroll:true,iframe:false,fadeIn:false,iframeId:null};Kg.extend(this.option,option||{},true)};