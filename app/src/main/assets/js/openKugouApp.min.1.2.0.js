!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).openKugouApp=e()}(this,function(){"use strict";function e(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)),i}function l(i){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?e(o,!0).forEach(function(t){var e,n;e=i,t=o[n=t],n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(o)):e(o).forEach(function(t){Object.defineProperty(i,t,Object.getOwnPropertyDescriptor(o,t))})}return i}function t(e){var t="cb"+(new Date).getTime();window[t]=function(t){"string"==typeof t?e.success(JSON.parse(t)):e.success(t)};var n,i=document.createElement("script");for(n in i.src=e.url+"&callback="+t,e.data)i.src+="&"+n+"="+e.data[n];document.getElementsByTagName("body")[0].appendChild(i)}var n=(window.kgWxEnvir||(window.kgWxEnvir=new i,window.hash=window.location.hash,"onhashchange"in window&&(void 0===document.documentMode||8==document.documentMode)?window.onhashchange=function(){window.kgWxEnvir.hasCheck=!1,window.kgWxEnvir.hasRegister=!1,window.kgWxEnvir.hasReady=!1,window.kgWxEnvir.init()}:setInterval(function(){window.location.hash!=window.hash&&(window.hash=window.location.hash,window.kgWxEnvir.hasCheck=!1,window.kgWxEnvir.hasRegister=!1,window.kgWxEnvir.hasReady=!1,window.kgWxEnvir.init())},150)),i.prototype.init=function(t,e){var n;/MicroMessenger/i.test(navigator.userAgent)&&(t&&t.jsApiList&&Array.isArray(t.jsApiList)&&(this.jsApiList=this.jsApiList.concat(t.jsApiList)),t&&t.version&&(this.version=t.version),-1!=window.location.origin.indexOf("kugou.com")?this.this_url=encodeURIComponent(window.location.href):this.this_url=encodeURIComponent("http://kugou.com"),(n=this).loadWxJs(function(){n.hasReady?e&&e(window.wx):(n.cbBus.push(e),n.hasCheck||(n.wxRegisterTimeout&&clearTimeout(n.wxRegisterTimeout),n.wxRegisterTimeout=setTimeout(function(){n.hasCheck=!0,n.getSignature()},500)))}),n.loadStatJs())},i.prototype.loadStatJs=function(t){var e;window.kgStatPush||this.hasLoadStatJS?t&&t():((e=document.createElement("script")).type="text/javascript",e.readyState?e.onreadystatechange=function(){this.hasLoadStatJS=!0,"loaded"!=e.readyState&&"complete"!=e.readyState||(e.onreadystatechange=null,t&&t())}:e.onload=function(){this.hasLoadStatJS=!0,t&&t()},e.src="https://staticssl.kugou.com/common/js/min/npm/stat.min.js",document.getElementsByTagName("head")[0].appendChild(e))},i.prototype.pushAPM=function(t){if("voo.kugou.com"==window.location.host||"test.kugou.com"==window.location.host)return null;t.ver=1e3,t.useragent=navigator.userAgen,t.os=1058,t.timestamp=+new Date,this.loadStatJs(function(){kgStatPush(t,1)})},i.prototype.loadWxJs=function(t){var e;window.wx||this.hasLoadJS?t&&t():(this.hasLoadJS=!0,(e=document.createElement("script")).type="text/javascript",e.readyState?e.onreadystatechange=function(){"loaded"!=e.readyState&&"complete"!=e.readyState||(e.onreadystatechange=null,t&&t())}:e.onload=function(){t&&t()},"1.6"===this.version?e.src="https://staticssl.kugou.com/common/js/kg-jweixin-1.6.0.js":e.src="https://staticssl.kugou.com/common/js/kg-jweixin-1.4.0.js",document.getElementsByTagName("head")[0].appendChild(e))},i.prototype.getSignature=function(){var e=this;e.OffTheWhiteList&&("voo.kugou.com"==window.location.host&&"test.kugou.com"==window.location.host||e.pushAPM({typeid:110493,state:0,te:"E1",position:3,fs:window.location.host,hash:window.location.href})),e.useNewShare?t({url:"https://mwechats.kugou.com/service/jssdk/getSignature?sdk=140&caller=kugou_web&url="+e.this_url,success:function(t){t&&(window.wx.config({beta:!0,debug:!1,appId:t.appId,timestamp:t.timestamp,nonceStr:t.nonceStr,signature:t.signature,jsApiList:e.jsApiList}),e.hasRegister=!0,window.wx.ready(function(){e.hasReady=!0,e.cbBus.forEach(function(t){t&&t(window.wx)})}),window.wx.error(function(t){try{t=JSON.stringify(t)}catch(t){}e.pushAPM({typeid:110493,state:0,te:"E1",position:2,fs:t||0,hash:window.location.href})}))}}):t({url:"https://mwechats.kugou.com/jssdk/getSignature?sdk=140&caller=kugou_mobile&url="+e.this_url,success:function(t){t&&(window.wx.config({debug:!1,beta:!0,appId:t.appId,timestamp:t.timestamp,nonceStr:t.nonceStr,signature:t.signature,jsApiList:e.jsApiList}),e.hasRegister=!0,window.wx.ready(function(){e.hasReady=!0,e.cbBus.forEach(function(t){t&&t(window.wx)})}),window.wx.error(function(t){try{t=JSON.stringify(t)}catch(t){}e.pushAPM({typeid:110493,state:0,te:"E1",position:1,fs:t||0,hash:window.location.href})}))}})},i.prototype.share=function(t){var e=this;if(!this.hasRegister)return"还未完成初始化，请在init回调中调用share方法";window.wx.ready(function(){t.title||e.pushAPM({typeid:110493,state:0,te:"E1",position:5,fs:"no_title",hash:window.location.href}),t.content||e.pushAPM({typeid:110493,state:0,te:"E1",position:6,fs:"no_content",hash:window.location.href}),t.img||e.pushAPM({typeid:110493,state:0,te:"E1",position:7,fs:"no_img",hash:window.location.href}),window.wx.onMenuShareAppMessage({title:t.title,desc:t.content,link:t.url,imgUrl:t.img,trigger:function(t){},success:function(t){},cancel:function(t){},fail:function(t){}}),window.wx.onMenuShareTimeline({title:t.title,desc:t.content,link:t.url,imgUrl:t.img,trigger:function(t){},success:function(t){},cancel:function(t){},fail:function(t){}}),window.wx.onMenuShareQQ({title:t.title,desc:t.content,link:t.url,imgUrl:t.img,success:function(){},cancel:function(){}}),window.wx.onMenuShareQZone({title:t.title,desc:t.content,link:t.url,imgUrl:t.img,success:function(){},cancel:function(){}}),window.wx.onMenuShareWeibo({title:t.title,desc:t.content,link:t.url,imgUrl:t.img,success:function(){},cancel:function(){}}),window.wx.updateAppMessageShareData({title:t.title,desc:t.content,link:t.url,imgUrl:t.img,success:function(){},cancel:function(){}}),window.wx.updateTimelineShareData({title:t.title,desc:t.content,link:t.url,imgUrl:t.img,success:function(){},cancel:function(){}}),8===parseInt(10*Math.random())&&e.pushAPM({typeid:110493,state:1,hash:window.location.href})})},{init:function(t,e){window.kgWxEnvir.init(e,t)},share:function(t){window.kgWxEnvir.share(t)},getUserInfo:function(t){if(/MicroMessenger/i.test(navigator.userAgent)){var e;if(-1==(i=""==(i=decodeURIComponent(window.location.search))&&window.location.hash&&-1!=window.location.hash.indexOf("?")?"?"+decodeURIComponent(window.location.hash).split("?")[1]:i).indexOf("openid")||-1==i.indexOf("unionid"))return void(window.location.href=(r=t||{},t=window.location.href,t=encodeURIComponent("https://mwechats.kugou.com/service/user/getInfo?redirect_uri="+encodeURIComponent(t)),"https://open.weixin.qq.com/connect/oauth2/authorize?appid="+(r.appid||"wx412c15698d95020e")+"&redirect_uri="+t+"&response_type=code&scope=snsapi_userinfo&state=1&connect_redirect=1#wechat_redirect"));for(var n={openid:"",unionid:"",nickname:"",sex:"",city:"",province:"",country:"",headimgurl:""},i=i.substr(1).split("&"),o=0;o<i.length;o++)1<(e=(e=-1!=(e=i[o]).indexOf("openid")?e.substring(e.indexOf("openid")):e).split("=")).length&&null!=n[e[0]]&&(n[e[0]]=e[1]);return n}var r;return null}});function i(){var t=window.location.host;-1!=["m3ws.kugou.com","ep.kugou.com","activity.kugou.com","h5.kugou.com","m.kugou.com"].join(",").indexOf(t)?this.useNewShare=!1:-1!=["m3ws.kugou.com","mtpls.kugou.com","h5.kugou.com","m.kugou.com"].join(",").indexOf(t)?this.useNewShare=!0:(this.useNewShare=!1,this.OffTheWhiteList=!0),this.hasCheck=!1,this.hasRegister=!1,this.hasReady=!1,this.cbBus=[],this.jsApiList=["launchApplication","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone","updateAppMessageShareData","updateTimelineShareData"],this.version="1.4"}function o(t,e){return t(e={exports:{}},e.exports),e.exports}function r(){return new Promise(function(e,t){a(1058,function(t){e(t)})})}var a=o(function(t,e){var s,a;t.exports=(s={Cookie:{write:function(t,e,n,i,o,r){/^\w*$/.test(t)||alert("cookie格式不正确"),/; /.test(e)&&alert("cookie格式不正确"),t=t+"="+e,n&&((e=new Date).setTime(e.getTime()+1e3*n),t+="; expires="+e.toGMTString()),i&&(t+="; path="+i),o&&(t+="; domain="+o),r&&(t+="; secure"),document.cookie=t},rewriteKey:function(t,e,n,i,o,r,a){var s,c=e;n&&(s=this.read(t),e=new RegExp("\\b"+e+"=([^&]*)\\b","g"),c=s.replace(e,function(t,e){return t.replace(e,n)})),/^\d+(s|m|h|d)$/i.test(i)?(/^\d+s$/i.test(i)&&this.setSec(t,c,i.replace(/s$/i,""),o,r,a),/^\d+m$/i.test(i)&&this.setMin(t,c,i.replace(/m$/i,""),o,r,a),/^\d+h$/i.test(i)&&this.setHour(t,c,i.replace(/h$/i,""),o,r,a),/^\d+d$/i.test(i)&&this.setDay(t,c,i.replace(/d$/i,""),o,r,a)):this.write(t,c,i,o,r,a)},setDay:function(t,e,n,i,o,r){this.write(t,e,24*n*60*60,i,o,r)},setHour:function(t,e,n,i,o,r){this.write(t,e,60*n*60,i,o,r)},setMin:function(t,e,n,i,o,r){this.write(t,e,60*n,i,o,r)},setSec:function(t,e,n,i,o,r){this.write(t,e,n,i,o,r)},read:function(t,e,n){for(var i="",o=document.cookie.split("; "),r=0;r<o.length;r++){var a=o[r].match(/^(\w+)=(.+)$/);if(a&&1<a.length&&a[1]==t){i=a[2];break}}return""==i?null:e?(n?JSON:new s.Param).parse(i)[e]:i},remove:function(t,e,n){t+="=",e&&(t+="; path="+e),n&&(t+=";domain="+n),t+="; expires=Fri, 02-Jan-1970 00:00:00 GMT",document.cookie=t}},Md5:function(t){function s(t,e,n,i,o,r){return f((r=f(f(e,t),f(i,r)))<<o|r>>>32-o,n)}function d(t,e,n,i,o,r,a){return s(e&n|~e&i,t,e,o,r,a)}function h(t,e,n,i,o,r,a){return s(e&i|n&~i,t,e,o,r,a)}function p(t,e,n,i,o,r,a){return s(e^n^i,t,e,o,r,a)}function g(t,e,n,i,o,r,a){return s(n^(e|~i),t,e,o,r,a)}function f(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t?function(t){for(var e="0123456789abcdef",n="",i=0;i<4*t.length;i++)n+=e.charAt(t[i>>2]>>i%4*8+4&15)+e.charAt(t[i>>2]>>i%4*8&15);return n}(function(t,e){t[e>>5]|=128<<e%32,t[14+(64+e>>>9<<4)]=e;for(var n=1732584193,i=-271733879,o=-1732584194,r=271733878,a=0;a<t.length;a+=16){var s=n,c=i,u=o,l=r,n=d(n,i,o,r,t[a+0],7,-680876936),r=d(r,n,i,o,t[a+1],12,-389564586),o=d(o,r,n,i,t[a+2],17,606105819),i=d(i,o,r,n,t[a+3],22,-1044525330);n=d(n,i,o,r,t[a+4],7,-176418897),r=d(r,n,i,o,t[a+5],12,1200080426),o=d(o,r,n,i,t[a+6],17,-1473231341),i=d(i,o,r,n,t[a+7],22,-45705983),n=d(n,i,o,r,t[a+8],7,1770035416),r=d(r,n,i,o,t[a+9],12,-1958414417),o=d(o,r,n,i,t[a+10],17,-42063),i=d(i,o,r,n,t[a+11],22,-1990404162),n=d(n,i,o,r,t[a+12],7,1804603682),r=d(r,n,i,o,t[a+13],12,-40341101),o=d(o,r,n,i,t[a+14],17,-1502002290),n=h(n,i=d(i,o,r,n,t[a+15],22,1236535329),o,r,t[a+1],5,-165796510),r=h(r,n,i,o,t[a+6],9,-1069501632),o=h(o,r,n,i,t[a+11],14,643717713),i=h(i,o,r,n,t[a+0],20,-373897302),n=h(n,i,o,r,t[a+5],5,-701558691),r=h(r,n,i,o,t[a+10],9,38016083),o=h(o,r,n,i,t[a+15],14,-660478335),i=h(i,o,r,n,t[a+4],20,-405537848),n=h(n,i,o,r,t[a+9],5,568446438),r=h(r,n,i,o,t[a+14],9,-1019803690),o=h(o,r,n,i,t[a+3],14,-187363961),i=h(i,o,r,n,t[a+8],20,1163531501),n=h(n,i,o,r,t[a+13],5,-1444681467),r=h(r,n,i,o,t[a+2],9,-51403784),o=h(o,r,n,i,t[a+7],14,1735328473),n=p(n,i=h(i,o,r,n,t[a+12],20,-1926607734),o,r,t[a+5],4,-378558),r=p(r,n,i,o,t[a+8],11,-2022574463),o=p(o,r,n,i,t[a+11],16,1839030562),i=p(i,o,r,n,t[a+14],23,-35309556),n=p(n,i,o,r,t[a+1],4,-1530992060),r=p(r,n,i,o,t[a+4],11,1272893353),o=p(o,r,n,i,t[a+7],16,-155497632),i=p(i,o,r,n,t[a+10],23,-1094730640),n=p(n,i,o,r,t[a+13],4,681279174),r=p(r,n,i,o,t[a+0],11,-358537222),o=p(o,r,n,i,t[a+3],16,-722521979),i=p(i,o,r,n,t[a+6],23,76029189),n=p(n,i,o,r,t[a+9],4,-640364487),r=p(r,n,i,o,t[a+12],11,-421815835),o=p(o,r,n,i,t[a+15],16,530742520),n=g(n,i=p(i,o,r,n,t[a+2],23,-995338651),o,r,t[a+0],6,-198630844),r=g(r,n,i,o,t[a+7],10,1126891415),o=g(o,r,n,i,t[a+14],15,-1416354905),i=g(i,o,r,n,t[a+5],21,-57434055),n=g(n,i,o,r,t[a+12],6,1700485571),r=g(r,n,i,o,t[a+3],10,-1894986606),o=g(o,r,n,i,t[a+10],15,-1051523),i=g(i,o,r,n,t[a+1],21,-2054922799),n=g(n,i,o,r,t[a+8],6,1873313359),r=g(r,n,i,o,t[a+15],10,-30611744),o=g(o,r,n,i,t[a+6],15,-1560198380),i=g(i,o,r,n,t[a+13],21,1309151649),n=g(n,i,o,r,t[a+4],6,-145523070),r=g(r,n,i,o,t[a+11],10,-1120210379),o=g(o,r,n,i,t[a+2],15,718787259),i=g(i,o,r,n,t[a+9],21,-343485551),n=f(n,s),i=f(i,c),o=f(o,u),r=f(r,l)}return Array(n,i,o,r)}(function(t){for(var e=Array(),n=0;n<8*t.length;n+=8)e[n>>5]|=(255&t.charCodeAt(n/8))<<n%32;return e}(t=t),8*t.length)):""},Param:function(){var n=[],r={};this.parse=function(t){for(var e=t.split("&"),n=0,i=e.length;n<i;n++){var o=e[n].split("=");r[o[0]]=o[1]}return r},this.toString=function(t){return n.join(t=t||"&")},this.add=function(t,e){return n.push(t+"="+e),this}},IsEmpty:function(t){return void 0===t||null==t||""==t},Guid:function(){function t(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},getKgMid:function(){var t=s.Cookie.read("kg_mid");if(navigator.cookieEnabled){if(s.IsEmpty(t)){var e=s.Guid(),t=s.Md5(e);try{s.Cookie.write("kg_mid",s.Md5(e),864e6,"/","kugou.com")}catch(t){}}}else{var n=navigator.userAgent,i=function(){var t=navigator.plugins,e="";if(0<t.length){for(var n=[],i=0,o=t.length;i<o;i++){var r=t[i].name;n.push(r)}e=n.toString()}return e}(),o=screen.width+"x"+screen.height,r=screen.colorDepth||"",a=screen.pixelDepth||"",e=function(){var t=["canvas"];try{var e,n=document.createElement("canvas");n.getContext&&n.getContext("2d")&&(n.width=200,n.height=200,n.style.display="inline",(e=n.getContext("2d")).rect(0,0,10,10),e.rect(2,2,6,6),t.push("canvas winding:"+(!1===e.isPointInPath(5,5,"evenodd")?"yes":"no")),e.textBaseline="alphabetic",e.fillStyle="#f60",e.fillRect(125,1,62,20),e.fillStyle="#069",e.font="14px 'Arial'",e.fillText("hello kugou",2,15),e.fillStyle="rgba(102, 204, 0, 0.2)",e.font="18pt Arial",e.fillText("hello kugou",4,45),e.globalCompositeOperation="multiply",e.fillStyle="rgb(255,0,255)",e.beginPath(),e.arc(50,50,50,0,2*Math.PI,!0),e.closePath(),e.fill(),e.fillStyle="rgb(0,255,255)",e.beginPath(),e.arc(100,50,50,0,2*Math.PI,!0),e.closePath(),e.fill(),e.fillStyle="rgb(255,255,0)",e.beginPath(),e.arc(75,100,50,0,2*Math.PI,!0),e.closePath(),e.fill(),e.fillStyle="rgb(255,0,255)",e.arc(75,75,75,0,2*Math.PI,!0),e.arc(75,75,25,0,2*Math.PI,!0),e.fill("evenodd"),n.toDataURL&&t.push("canvas fp:"+n.toDataURL()))}catch(t){}return s.Md5(t.toString())}();t=s.Md5(n+i+o+r+a+e)}return t},isiOS:function(){var t=(n=navigator.userAgent).match(/(iPad).*OS\s([\d_]+)/),e=n.match(/(iPod)(.*OS\s([\d_]+))?/),n=!t&&n.match(/(iPhone\sOS)\s([\d_]+)/);return!!(t||e||n)},GetPCClientUserInfo:function(e){var n="KGSupercall_GetUserInfo"+Math.random().toString().substr(2,9),t=null;window[n]=function(t){e&&e(t),window[n]=null};try{t=external.SuperCall(504,'{"callback":"'+n+'"}')}catch(t){}if(void 0===t||!e)return e?void 0:(window[n]=null,t);window[n](t)},getPCMID_APPID:function(e){try{var n;"function"==typeof e?(n="KGSupercall_getMID_APPID"+Math.random().toString().substr(2,9),top.window[n]=function(t){t&&(top.window[n]=null,e&&e(t))},external.SuperCall(822,'{"callback":"'+n+'"}')):external.SuperCall(822,e)}catch(t){}},isPCClient:function(){var t=!1;return!!(window.external&&window.external.SuperCall&&"function"==typeof window.external.SuperCall&&window.external.GetVersion&&0<window.external.GetVersion())||t}},function(t){function e(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)),i}function r(i){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?e(Object(o),!0).forEach(function(t){var e,n=i;t=o[e=t],e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach(function(t){Object.defineProperty(i,t,Object.getOwnPropertyDescriptor(o,t))})}return i}var c;t.exports=(t={isIOS:(c={str2Json:function(t){var e={};if("[object String]"===Object.prototype.toString.call(t))try{e=JSON.parse(t)}catch(t){e={}}return e},json2Str:function(t){var e=t;if("string"!=typeof t)try{e=JSON.stringify(t)}catch(t){e=""}return e},cbNum:0,isIOS:!!navigator.userAgent.match(/KGBrowser/gi),isKugouAndroid:!!navigator.userAgent.match(/kugouandroid/gi),isAndroid:"undefined"!=typeof external&&void 0!==external.superCall,isDKAPP:!!navigator.userAgent.match(/kgshortvideo/gi),isKGRing:!!navigator.userAgent.match(/KGRingCode/gi),isFXAPP:!!navigator.userAgent.match(/Fanxing/gi),isFXQianBanAPP:!!navigator.userAgent.match(/QianBan/gi),isIframePage:window.parent&&window.parent!=window,isInClient:function(){return!!(c.isAndroid||c.isKugouAndroid||c.isIOS||c.isFXAPP||c.isFXQianBanAPP||c.isDKAPP||c.isKGRing)},loadUrl:function(t){var e=document.createElement("iframe");e.setAttribute("src",t),e.setAttribute("style","display:none;"),e.setAttribute("height","0px"),e.setAttribute("width","0px"),e.setAttribute("frameborder","0"),document.body.appendChild(e),e.parentNode.removeChild(e)},mobileCallInIframe:function(t,e,n){t={type:"KgMobileCall",cmd:t},e&&(t.dataJson=e),n&&(t.cbName=n),t.source="personal",window.parent.postMessage(t,"*")},receiveMessage:function(t){var e=t.data;"KgMobileCall"==e.type&&window[e.cbName]&&(e.dataJson?window[e.cbName](e.dataJson):window[e.cbName](),window[e.cbName]=null),"KgWebMobileCall"==e.type&&(t=e.funcName.split("."),KgWebMobileCall[t[1]]&&(e.dataJson?KgWebMobileCall[t[1]](e.dataJson):KgWebMobileCall[t[1]]()))},callCmd:function(n){var t,e,i=c,o="kugouurl",o=i.isKugouAndroid?"kugoujsbridge":i.isAndroid?"superCall":i.isFXAPP||i.isFXQianBanAPP?"fanxing2":"kugouurl";if("kugoujsbridge"==(o=n&&n.useMobileCallType?n.useMobileCallType:o)){var r={},a="";n.cmd&&(r.cmd=n.cmd),n.jsonStr&&(r.jsonStr=n.jsonStr),n.callback&&(i.cbNum++,a="kgandroidmobilecall_"+(n.cmd||0)+"_"+i.cbNum+Math.random().toString().substr(2,9),r.callback=a,window[a]=function(t,e){if(void 0!==t)if("[object String]"===Object.prototype.toString.call(t)){try{t="#"===e?decodeURIComponent(t):decodeURIComponent(decodeURIComponent(t))}catch(t){console.error("decodeURIComponent",t)}n.callback(i.str2Json(t))}else n.callback(t)}),n.AndroidCallback&&((s=i.str2Json(n.jsonStr)).AndroidCallback=a,n.jsonStr=i.json2Str(s),n.jsonStr&&(r.jsonStr=n.jsonStr));var s=encodeURIComponent(JSON.stringify(r)),s="kugoujsbridge://start.kugou_jsbridge/?".concat(s);i.isIframePage?i.mobileCallInIframe(r.cmd,r.jsonStr,a):i.loadUrl(s)}else if("superCall"==o){if(a=r="",n.jsonStr)if(n.callback&&""!==n.callback&&!0===n.AndroidCallback&&(i.cbNum++,a="kgmobilecall_"+(n.cmd||0)+"_"+i.cbNum+Math.random().toString().substr(2,9),window[a]=function(t,e){if(void 0!==t)if("[object String]"===Object.prototype.toString.call(t)){try{t="#"===e?decodeURIComponent(t):decodeURIComponent(decodeURIComponent(t))}catch(t){console.error("decodeURIComponent",decodeURIComponent)}n.callback(i.str2Json(t))}else n.callback(t)},(s=i.str2Json(n.jsonStr)).AndroidCallback=a,n.jsonStr=i.json2Str(s)),i.isIframePage&&n.AndroidCallback)i.mobileCallInIframe(n.cmd,n.jsonStr,a);else try{r=external.superCall(n.cmd,n.jsonStr)}catch(t){}else try{r=external.superCall(n.cmd)}catch(t){}n.AndroidCallback||n.callback&&""!==n.callback&&"AndroidCallback"!=r&&(r=i.str2Json(r),n.callback(r))}else"fanxing2"==o?(o=e="",e=n.callback?(i.cbNum++,o="kgmobilecall_"+(n.cmd||0)+"_"+i.cbNum+Math.random().toString().substr(2,9),window[o]=function(t){void 0!==t&&n.callback&&("[object String]"===Object.prototype.toString.call(t)?n.callback(i.str2Json(t)):n.callback(t))},n.jsonStr?'fanxing2://send.message/?{"cmd":'+n.cmd+', "jsonStr":'+n.jsonStr+', "callback":"'+o+'"}':'fanxing2://send.message/?{"cmd":'+n.cmd+', "callback":"'+o+'"}'):n.jsonStr?'fanxing2://send.message/?{"cmd":'+n.cmd+', "jsonStr":'+n.jsonStr+"}":'fanxing2://send.message/?{"cmd":'+n.cmd+"}",i.isIframePage?i.mobileCallInIframe(n.cmd,n.jsonStr,o):navigator.userAgent.match(/(Android);?[\s\/]+([\d.]+)?/)?external&&external.callFanxing?(t={cmd:n.cmd,jsonStr:n.jsonStr||"",callback:o},external.callFanxing(JSON.stringify(t))):window.prompt(e):i.loadUrl(e)):(e=t="",n.callback&&(i.cbNum++,e="kgmobilecall_"+(n.cmd||0)+"_"+i.cbNum+Math.random().toString().substr(2,9),window[e]=function(t){void 0!==t&&n.callback&&("[object String]"===Object.prototype.toString.call(t)?n.callback(i.str2Json(t)):n.callback(t))}),e&&""!=e&&n.jsonStr&&(t='kugouurl://start.music/?{"cmd":'+n.cmd+', "jsonStr":'+n.jsonStr+', "callback":"'+e+'"}'),e&&""!=e&&!n.jsonStr&&(t='kugouurl://start.music/?{"cmd":'+n.cmd+', "callback":"'+e+'"}'),""==e&&n.jsonStr&&(t='kugouurl://start.music/?{"cmd":'+n.cmd+', "jsonStr":'+n.jsonStr+"}"),""!=e||n.jsonStr||(t='kugouurl://start.music/?{"cmd":'+n.cmd+"}"),i.isIframePage?i.mobileCallInIframe(n.cmd,n.jsonStr,e):i.loadUrl(t))},sendCommandOrder:function(t){var e=window.location.origin,n=~e.indexOf("voo.kugou.com")||~e.indexOf("http://10.16.4.19:8099")||~e.indexOf("http://test.kugou.com:8099"),i=window._VO_ACT_ID_;n&&i&&t&&(t={actId:i,cmd:t},t=c.json2Str({url:"".concat(e,"/public/addCommandOrder"),method:"post",param:c.json2Str(t),header:{"Content-Type":"application/json"},AndroidCallback:!0}),c.callCmd({cmd:186,jsonStr:t,callback:function(t){~window.location.href.indexOf("debugCmd")&&console.log(t)}}))}}).isIOS,isKugouAndroid:c.isKugouAndroid,isAndroid:c.isAndroid,isFXAPP:c.isFXAPP,isFXQianBanAPP:c.isFXQianBanAPP,isDKAPP:c.isDKAPP,isKGRing:c.isKGRing,isInClient:function(){return c.isInClient()},mobileCall:function(t,e,n,i){var o="";if(e&&(o=c.json2Str(e)),!t)return console.error("请输入命令号！"),!1;if(e={},t&&(e.cmd=t),""!=o&&(e.jsonStr=o),n&&(e.callback=n),e=r(r({},e),i),!t||186!=t&&225!=t||n&&(e.AndroidCallback=!0),e.AndroidCallback&&!e.jsonStr&&(e.jsonStr={}),c.isInClient()){c.callCmd(e);try{c.sendCommandOrder(t)}catch(t){}}},KgWebMobileCall:function(i,o){if(i)try{c.isIframePage&&window.parent.postMessage({type:"KgWebMobileCall",funcName:i},"*");var r=i.split(".");r.reduce(function(t,e){if(t[e]){if(e!==r[r.length-1])return t[e];var n=t[e];return"function"==typeof n?(t[e]=function(){n&&n.apply(void 0,arguments),o&&o.apply(void 0,arguments)},t[e]):(console.error("请检查，当前环境变量已注册了对象："+i+"，且该对象不是方法"),null)}return e===r[r.length-1]?t[e]=function(){o&&o.apply(void 0,arguments)}:t[e]=new Object,t[e]},window)}catch(t){}}},window.addEventListener("message",function(t){c.receiveMessage(t)},!1),t)}(t={exports:{}}),a=t.exports,function(t,e,n){var i={useMobileCallType:""};n&&a.isKugouAndroid&&!a.isIOS&&(i={useMobileCallType:"superCall"});var o=101,r={appid:null,mid:null,uuid:null,plat:null,dfid:null,userid:null,userpic:null,userNickName:null,token:null,clientver:null};a.isInClient()&&!a.isFXAPP?a.mobileCall(o,null,function(t){1==t.status?(r.userid=t.kugouID,r.token=t.token,r.userpic=t.photo,r.userNickName=t.nickName,r.isVIP=t.isVIP||t.isVip):(r.userid=null,r.token=null,r.userpic=null,r.userNickName=null),r.appid=t.appid,a.mobileCall(122,null,function(t){r.clientver=t.version,r.platform=t.platform||"",a.mobileCall(124,null,function(t){r.mid=t.mid_v2||t.mid,r.dfid=t.dfid||"-",r.uuid=t.uuid||r.mid,r.osVersion=t.osVersion||"",a.isIOS?r.plat=2:r.plat=1,e&&e(r)},i)},i)},i):a.isInClient()&&a.isFXAPP?a.mobileCall(625,null,function(t){t=JSON.parse(t.jsonStr),r.clientver=t.version,r.mid=t.mid,r.uuid=t.uuid||r.mid,r.dfid=t.dfid||"-",r.appid=t.appId,s.isiOS()?r.plat=2:r.plat=1,a.mobileCall(410,null,function(t){1==JSON.parse(t.jsonStr).status?a.mobileCall(411,{},function(t){t=JSON.parse(t.jsonStr).jsonStr?JSON.parse(t.jsonStr).jsonStr:JSON.parse(t.jsonStr),r.userid=t.kugouId,r.token=t.token,r.pic=t.userLogo,r.nickName=t.nickName,e&&e(r)}):(r.userid=null,r.token=null,r.userpic=null,r.userNickName=null,e&&e(r))})}):s.isPCClient()?s.GetPCClientUserInfo(function(t){try{t=JSON.parse(t)}catch(t){}r.userid=t.kugouid||"",r.token=t.token||"",r.userNickName=t.nickname||"",r.userpic=t.usrPic||"",r.userNickName=r.userNickName?unescape(r.userNickName):"",s.getPCMID_APPID(function(t){try{t=JSON.parse(t)}catch(t){}r.appid=t.appid||1001,r.dfid=t.dfid||"-",r.mid=t.mid||"",r.uuid=t.uuid||r.mid,r.plat=3,r.clientver=window.external.GetVersion(),e&&e(r)})}):(n=s.Cookie.read("a_id"),o=s.Cookie.read("KuGoo","a_id"),r.appid=t||null,r.mid=s.getKgMid(),r.uuid=r.mid,r.plat=4,r.dfid=s.Cookie.read("kg_dfid")||"-",r.userid=s.Cookie.read("KuGoo","KugooID"),r.userpic=s.Cookie.read("KuGoo","Pic"),r.userNickName=s.Cookie.read("KuGoo","NickName"),r.token=s.Cookie.read("KuGoo","t"),r.appid=r.appid||o||n||null,o&&o!=r.appid&&r.appid&&(r.userid=null,r.token=null,r.userpic=null,r.userNickName=null),r.clientver=1e3,r.userNickName=r.userNickName?unescape(r.userNickName):"",e&&e(r))})}),s=o(function(t,e){function g(t){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var f,m;t.exports=(f={ver:"2.4",isAndroid:"undefined"!=typeof external&&void 0!==external.superCall,isIOS:!!navigator.userAgent.match(/KGBrowser/gi),chkAndroidApp:function(){try{if(external.superCall(122))return!0}catch(t){return!1}},cbNum:0,isInClient:function(){return this.chkAndroidApp()?this.chkAndroidApp():!!this.isIOS&&this.isIOS},str2Json:function(t){var e={};if("[object String]"===Object.prototype.toString.call(t))try{e=JSON.parse(t)}catch(t){e={}}return e},json2Str:function(t){var e="";if("string"!=typeof t)try{e=JSON.stringify(t)}catch(t){e=""}return e},loadUrl:function(t){var e;(e=document.createElement("iframe")).setAttribute("src",t),e.setAttribute("style","display:none;"),e.setAttribute("height","0px"),e.setAttribute("width","0px"),e.setAttribute("frameborder","0"),document.body.appendChild(e),e.parentNode.removeChild(e)},callCmd:function(e){var t,n,i=this,o="";if(i.chkAndroidApp())try{t=e.jsonStr?external.superCall(e.cmd,e.jsonStr):external.superCall(e.cmd),e.callback&&""!==e.callback&&(t=i.str2Json(t),e.callback(t))}catch(e){}else i.isIOS?(o=e.callback?(n="kgmobilecalllite"+ ++i.cbNum+Math.random().toString().substr(2,9),window[n]=function(t){void 0!==t&&e.callback&&("[object String]"===Object.prototype.toString.call(t)?e.callback(i.str2Json(t)):e.callback(t))},e.jsonStr?'kugouurl://start.music/?{"cmd":'+e.cmd+', "jsonStr":'+e.jsonStr+', "callback":"'+n+'"}':'kugouurl://start.music/?{"cmd":'+e.cmd+', "callback":"'+n+'"}'):e.jsonStr?'kugouurl://start.music/?{"cmd":'+e.cmd+', "jsonStr":'+e.jsonStr+"}":'kugouurl://start.music/?{"cmd":'+e.cmd+"}",i.loadUrl(o)):e.callback&&e.callback({status:0,error:"不在客户端内"})},getData:function(t,e){var n;t&&(n=this.json2Str(t),e?this.callCmd({cmd:186,jsonStr:n,callback:e,AndroidCallback:!0}):this.callCmd({cmd:186,jsonStr:n}))}},m=m||{appid:1e3,appkey:"abcdefg"},function(){function u(){var t={_t:(new Date).getTime(),_r:Math.random(),appid:m.appid},e=r(t,""),e="https://webcollects.kugou.com/v2/web/time.js?appid="+t.appid+"&_t="+t._t+"&_r="+t._r+"&sign="+e;try{!function(t,e){{var n,i;f.isInClient()&&!m.userH5?(n={url:t,method:"get",timeout:0,param:""},setTimeout(function(){return f.getData(n,function(t){e&&e(t)}),null},30)):((i=new XMLHttpRequest).onreadystatechange=function(){4!==i.readyState||200!==i.status&&304!==i.status||e(i.responseText)},i.open("GET",t,!0),i.send())}}(e,m.callback)}catch(t){}clearTimeout(m.callbackT),m.callbackT=setTimeout(function(){if(1!=m.getServerFlag&&0<m.requestList.length){for(var t=0,e=m.requestList.length;t<e;t++){var n=m.requestList[t];n[2]&&n[2]()}clearTimeout(m.callbackT)}},2e3)}function l(t,e,n,i){var o={_t:parseInt((new Date).getTime()/1e3)+m.jetTag,business:t,appid:m.appid},t=r(o,e);(function(t,e,n){if(f.isInClient()){var i=c(),o=document.createElement("form");o.name="postForm"+i,o.id="postForm"+i;var r=document.createElement("input");r.type="hidden",r.name="content",r.value=e,o.appendChild(r),document.body.appendChild(o);var a=null;try{a=document.createElement('<iframe name="postIframe'+i+'">')}catch(t){a=document.createElement("iframe")}try{a.name="postIframe"+i,a.id="postIframe"+i,a.width="1",a.height="1",a.style.display="none",document.body.appendChild(a),o.action=t,o.target=a.name,o.method="post",o.submit(),n&&n()}catch(t){n&&n()}return a.attachEvent?a.attachEvent("onload",function(){null!=m.clinetfrom&&"1001"!=m.clinetfrom||(document.body.removeChild(a),document.body.removeChild(o)),a=null,n&&n()}):a.onload=function(){null!=m.clinetfrom&&"1001"!=m.clinetfrom||(document.body.removeChild(a),document.body.removeChild(o)),a=null,n&&n()}}var s=new XMLHttpRequest;s.open("POST",t,!0),s.withCredentials=!0,s.setRequestHeader("Content-type","application/x-www-form-urlencoded"),s.onreadystatechange=function(){4==s.readyState&&n&&n()},s.send("content="+encodeURIComponent(e))})((i?"https://rtwebcollects.kugou.com/":"https://webcollects.kugou.com/")+"v2/web/post?appid="+o.appid+"&business="+o.business+"&_t="+o._t+"&sign="+t,e,n)}function d(t,e){var n,i,o,r,a,s={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},c=/["\\\x00-\x1f\x7f-\x9f]/g;switch(g(t)){case"string":return c.test(t)?'"'+t.replace(c,function(t){var e;return(e=s[t])||(e=t.charCodeAt(),"\\u00"+Math.floor(e/16).toString(16)+(e%16).toString(16))})+'"':'"'+t+'"';case"number":return isFinite(t)?String(t):"null";case"boolean":case"null":return String(t);case"object":if(!t)return"null";if("function"==typeof t.toJSON)return d(t.toJSON());if(n=[],"number"==typeof t.length&&!t.propertyIsEnumerable("length")){for(r=t.length,i=0;i<r;i+=1)n.push(d(t[i],e)||"null");return"["+n.join(",")+"]"}if(e)for(r=e.length,i=0;i<r;i+=1)"string"==typeof(o=e[i])&&(a=d(t[o],e))&&n.push(d(o)+":"+a);else for(o in t)"string"==typeof o&&(a=d(t[o],e))&&n.push(d(o)+":"+a);return"{"+n.join(",")+"}"}}function r(t,e){var n,i="",o=[];for(n in t)o.push(n);o.sort();for(var r=0,a=o.length;r<a;r++)i+=o[r]+t[o[r]];return i+=m.appkey+e,s.md5(i)}function h(t,e,n,i,o){try{if(apmCollectData&&0<apmCollectData.length)for(var r=0,a=apmCollectData.length;r<a;r++){var s=apmCollectData.pop(),c=s[1];h(s[0],c,s[2],s[3],s[4])}}catch(t){}try{e.toString(),m.clinetfrom=e.plat_id,m.userH5=o}catch(t){}!function(t){for(var e in t)if(t.hasOwnProperty(e))return;return 1}(e)&&(o=encodeURIComponent(d(e)),e=[t,e,n,i],m.getServerFlag?l(t,o,n,i):(m.requestList.push(e),clearTimeout(p),p=setTimeout(u,1e3)))}if(1!=m.loaded){var p;m.loaded=!0,m.servertime=1421395624,m.getServerFlag=!1,m.requestList=[],m.jetTag=-1,m.callback=function(t){m.getServerFlag=!0;t=parseInt(t.now);if(m.servertime=parseInt(t),m.jetTag=m.servertime-parseInt((new Date).getTime()/1e3)||0,m.getServerFlag&&(clearTimeout(p),0<m.requestList.length))for(var e=0,n=m.requestList.length;e<n;e++){var i=m.requestList.pop(),o=encodeURIComponent(d(i[1]));l(i[0],o,i[2],i[3])}};var s={hex_chr:"0123456789abcdef",rhex:function(t){for(var e="",n=0;n<=3;n++)e+=this.hex_chr.charAt(t>>8*n+4&15)+this.hex_chr.charAt(t>>8*n&15);return e},str2blks_MD5:function(t){for(var e=1+(t.length+8>>6),n=new Array(16*e),i=0;i<16*e;i++)n[i]=0;for(i=0;i<t.length;i++)n[i>>2]|=t.charCodeAt(i)<<i%4*8;return n[i>>2]|=128<<i%4*8,n[16*e-2]=8*t.length,n},add:function(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n},rol:function(t,e){return t<<e|t>>>32-e},cmn:function(t,e,n,i,o,r){return this.add(this.rol(this.add(this.add(e,t),this.add(i,r)),o),n)},ff:function(t,e,n,i,o,r,a){return this.cmn(e&n|~e&i,t,e,o,r,a)},gg:function(t,e,n,i,o,r,a){return this.cmn(e&i|n&~i,t,e,o,r,a)},hh:function(t,e,n,i,o,r,a){return this.cmn(e^n^i,t,e,o,r,a)},ii:function(t,e,n,i,o,r,a){return this.cmn(n^(e|~i),t,e,o,r,a)},md5:function(t){for(var e=this.str2blks_MD5(t),n=1732584193,i=-271733879,o=-1732584194,r=271733878,a=0;a<e.length;a+=16){var s=n,c=i,u=o,l=r,n=this.ff(n,i,o,r,e[a+0],7,-680876936),r=this.ff(r,n,i,o,e[a+1],12,-389564586),o=this.ff(o,r,n,i,e[a+2],17,606105819),i=this.ff(i,o,r,n,e[a+3],22,-1044525330);n=this.ff(n,i,o,r,e[a+4],7,-176418897),r=this.ff(r,n,i,o,e[a+5],12,1200080426),o=this.ff(o,r,n,i,e[a+6],17,-1473231341),i=this.ff(i,o,r,n,e[a+7],22,-45705983),n=this.ff(n,i,o,r,e[a+8],7,1770035416),r=this.ff(r,n,i,o,e[a+9],12,-1958414417),o=this.ff(o,r,n,i,e[a+10],17,-42063),i=this.ff(i,o,r,n,e[a+11],22,-1990404162),n=this.ff(n,i,o,r,e[a+12],7,1804603682),r=this.ff(r,n,i,o,e[a+13],12,-40341101),o=this.ff(o,r,n,i,e[a+14],17,-1502002290),i=this.ff(i,o,r,n,e[a+15],22,1236535329),n=this.gg(n,i,o,r,e[a+1],5,-165796510),r=this.gg(r,n,i,o,e[a+6],9,-1069501632),o=this.gg(o,r,n,i,e[a+11],14,643717713),i=this.gg(i,o,r,n,e[a+0],20,-373897302),n=this.gg(n,i,o,r,e[a+5],5,-701558691),r=this.gg(r,n,i,o,e[a+10],9,38016083),o=this.gg(o,r,n,i,e[a+15],14,-660478335),i=this.gg(i,o,r,n,e[a+4],20,-405537848),n=this.gg(n,i,o,r,e[a+9],5,568446438),r=this.gg(r,n,i,o,e[a+14],9,-1019803690),o=this.gg(o,r,n,i,e[a+3],14,-187363961),i=this.gg(i,o,r,n,e[a+8],20,1163531501),n=this.gg(n,i,o,r,e[a+13],5,-1444681467),r=this.gg(r,n,i,o,e[a+2],9,-51403784),o=this.gg(o,r,n,i,e[a+7],14,1735328473),i=this.gg(i,o,r,n,e[a+12],20,-1926607734),n=this.hh(n,i,o,r,e[a+5],4,-378558),r=this.hh(r,n,i,o,e[a+8],11,-2022574463),o=this.hh(o,r,n,i,e[a+11],16,1839030562),i=this.hh(i,o,r,n,e[a+14],23,-35309556),n=this.hh(n,i,o,r,e[a+1],4,-1530992060),r=this.hh(r,n,i,o,e[a+4],11,1272893353),o=this.hh(o,r,n,i,e[a+7],16,-155497632),i=this.hh(i,o,r,n,e[a+10],23,-1094730640),n=this.hh(n,i,o,r,e[a+13],4,681279174),r=this.hh(r,n,i,o,e[a+0],11,-358537222),o=this.hh(o,r,n,i,e[a+3],16,-722521979),i=this.hh(i,o,r,n,e[a+6],23,76029189),n=this.hh(n,i,o,r,e[a+9],4,-640364487),r=this.hh(r,n,i,o,e[a+12],11,-421815835),o=this.hh(o,r,n,i,e[a+15],16,530742520),i=this.hh(i,o,r,n,e[a+2],23,-995338651),n=this.ii(n,i,o,r,e[a+0],6,-198630844),r=this.ii(r,n,i,o,e[a+7],10,1126891415),o=this.ii(o,r,n,i,e[a+14],15,-1416354905),i=this.ii(i,o,r,n,e[a+5],21,-57434055),n=this.ii(n,i,o,r,e[a+12],6,1700485571),r=this.ii(r,n,i,o,e[a+3],10,-1894986606),o=this.ii(o,r,n,i,e[a+10],15,-1051523),i=this.ii(i,o,r,n,e[a+1],21,-2054922799),n=this.ii(n,i,o,r,e[a+8],6,1873313359),r=this.ii(r,n,i,o,e[a+15],10,-30611744),o=this.ii(o,r,n,i,e[a+6],15,-1560198380),i=this.ii(i,o,r,n,e[a+13],21,1309151649),n=this.ii(n,i,o,r,e[a+4],6,-145523070),r=this.ii(r,n,i,o,e[a+11],10,-1120210379),o=this.ii(o,r,n,i,e[a+2],15,718787259),i=this.ii(i,o,r,n,e[a+9],21,-343485551),n=this.add(n,s),i=this.add(i,c),o=this.add(o,u),r=this.add(r,l)}return this.rhex(n)+this.rhex(i)+this.rhex(o)+this.rhex(r)}},c=function(){var t=(new Date).getTime()+"-",e=0;return function(){return t+e++}}();u();try{if(apmCollectData&&0<apmCollectData.length)for(var t=0,e=apmCollectData.length;t<e;t++){var n=apmCollectData.pop(),i=n[1];h(n[0],i,n[2],n[3],n[4])}}catch(t){}window.newLogCount=h}}(),window.apmCollectData=[],window.WebCollectConfig=m,function(t,e,n){switch(e){case!0:case 1:window.apmCollectData.push([12,t,null,!0,n]);break;case 2:window.apmCollectData.push([30050,t,null,!1,n]);break;case 3:window.apmCollectData.push([30030,t,null,!1,n]);break;default:window.apmCollectData.push([30050,t,null,!1,n])}try{window.newLogCount()}catch(t){}})}),c=arguments,d={getSysBowser:function(){function t(t){return n.match(t)}var e=new Array(2),n=navigator.userAgent.toLocaleLowerCase();return t(/android/i)?e[0]=1:t(/iphone/i)||t(/KGBrowser/i)?e[0]=2:t(/ipad/i)?e[0]=3:e[0]=4,t(/kgbrowser/gi)||d.safeGetJson(window,"external","superCall")?e[1]=1:t(/micromessenger/gi)&&!t(/wxwork/gi)?e[1]=2:t(/micromessenger/gi)&&t(/wxwork/gi)?e[1]=7:t(/android/i)&&t(/qq/gi)&&t(/mqqbrowser/gi)||(t(/iphone/i)||t(/ipad/i))&&t(/ qq/gi)?e[1]=3:t(/weibo/gi)?e[1]=4:t(/fanxing/gi)?e[1]=5:t(/kgshortvideo/gi)?e[1]=6:e[1]=100,e},safeGetJson:function(t){try{for(var e=c.length,n=new Array(1<e?e-1:0),i=1;i<e;i++)n[i-1]=c[i];return arr.reduce(function(t,e){return t[e]},t)}catch(t){return 0}},initWXSign:function(t){n.init(function(){t&&t()})},isWechatWhiteList:function(){for(var t=["https://m3ws.kugou.com","https://ep.kugou.com","https://activity.kugou.com","https://m.kugou.com","https://h5.kugou.com"],e=window.location.protocol+"//"+window.location.host,n=t.length;n--;)if(t[n]===e)return!0;return!1},getUrlParam:function(t){var e="",n=window.location.href,i=n.indexOf("?"),o=n.indexOf("#");0<=i&&-1==o&&(e=n.substr(i)),0<=o&&-1==i&&(e=""),0<=o&&0<=i&&o<i&&(e=n.substr(i));var r={};if(-1!=(e=0<=o&&0<=i&&i<o?n.substr(i,o-i):e).indexOf("?"))for(var a=e.substr(1).split("&"),s=0;s<a.length;s++)r[a[s].split("=")[0]]=a[s].split("=")[1];return r[t]},checkOpen:function(t){var e,n=null,i=0,n=window.setInterval(function(){if(i++,(e=document.hidden||document.webkitHidden||document.mozHidden||document.msHidden)||50<i){if(clearInterval(n),e)return null;t(e)}},50)},getOpenBIData:function(){var t=2==d.getSysBowser()[1],e=3==d.getSysBowser()[1],n=4==d.getSysBowser()[1],i=7==d.getSysBowser()[1],o="";1==d.getSysBowser()[0]?o="android":2==d.getSysBowser()[0]?o="iphone":3==d.getSysBowser()[0]&&(o="ipad");var r=navigator.userAgent.toLocaleLowerCase();return t?r="".concat(o,"-wx"):e?r="".concat(o,"-qq"):n?r="".concat(o,"-wb"):i&&(r="".concat(o,"-work")),{key:d.getKey(),actid:"",kugouid:d.Cookie.read("KuGoo","KugooID")||0,url:window.location.origin+window.location.pathname,ua:r,expand:p.getId()}},Cookie:{write:function(t,e,n,i,o,r){/^\w*$/.test(t)||console.error("cookie error"),/; /.test(e)&&console.error("cookie error");t=t+"="+e;n&&((e=new Date).setTime(e.getTime()+1e3*n),t+="; expires="+e.toGMTString()),i&&(t+="; path="+i),o&&(t+="; domain="+o),r&&(t+="; secure"),document.cookie=t},read:function(t,e,n){for(var i="",o=document.cookie.split("; "),r=0;r<o.length;r++){var a=o[r].match(/^(\w+)=(.+)$/);if(a&&1<a.length&&a[1]==t){i=a[2];break}}return""==i?null:e?(n?JSON:new d.Param).parse(i)[e]:i}},Md5:function(t){var e,o=8;function s(t,e,n,i,o,r){return f((r=f(f(e,t),f(i,r)))<<o|r>>>32-o,n)}function d(t,e,n,i,o,r,a){return s(e&n|~e&i,t,e,o,r,a)}function h(t,e,n,i,o,r,a){return s(e&i|n&~i,t,e,o,r,a)}function p(t,e,n,i,o,r,a){return s(e^n^i,t,e,o,r,a)}function g(t,e,n,i,o,r,a){return s(n^(e|~i),t,e,o,r,a)}function f(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t=t?function(t){for(var e="0123456789abcdef",n="",i=0;i<4*t.length;i++)n+=e.charAt(t[i>>2]>>i%4*8+4&15)+e.charAt(t[i>>2]>>i%4*8&15);return n}(function(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;for(var n=1732584193,i=-271733879,o=-1732584194,r=271733878,a=0;a<t.length;a+=16){var s=n,c=i,u=o,l=r;n=d(n,i,o,r,t[a+0],7,-680876936),r=d(r,n,i,o,t[a+1],12,-389564586),o=d(o,r,n,i,t[a+2],17,606105819),i=d(i,o,r,n,t[a+3],22,-1044525330),n=d(n,i,o,r,t[a+4],7,-176418897),r=d(r,n,i,o,t[a+5],12,1200080426),o=d(o,r,n,i,t[a+6],17,-1473231341),i=d(i,o,r,n,t[a+7],22,-45705983),n=d(n,i,o,r,t[a+8],7,1770035416),r=d(r,n,i,o,t[a+9],12,-1958414417),o=d(o,r,n,i,t[a+10],17,-42063),i=d(i,o,r,n,t[a+11],22,-1990404162),n=d(n,i,o,r,t[a+12],7,1804603682),r=d(r,n,i,o,t[a+13],12,-40341101),o=d(o,r,n,i,t[a+14],17,-1502002290),i=d(i,o,r,n,t[a+15],22,1236535329),n=h(n,i,o,r,t[a+1],5,-165796510),r=h(r,n,i,o,t[a+6],9,-1069501632),o=h(o,r,n,i,t[a+11],14,643717713),i=h(i,o,r,n,t[a+0],20,-373897302),n=h(n,i,o,r,t[a+5],5,-701558691),r=h(r,n,i,o,t[a+10],9,38016083),o=h(o,r,n,i,t[a+15],14,-660478335),i=h(i,o,r,n,t[a+4],20,-405537848),n=h(n,i,o,r,t[a+9],5,568446438),r=h(r,n,i,o,t[a+14],9,-1019803690),o=h(o,r,n,i,t[a+3],14,-187363961),i=h(i,o,r,n,t[a+8],20,1163531501),n=h(n,i,o,r,t[a+13],5,-1444681467),r=h(r,n,i,o,t[a+2],9,-51403784),o=h(o,r,n,i,t[a+7],14,1735328473),i=h(i,o,r,n,t[a+12],20,-1926607734),n=p(n,i,o,r,t[a+5],4,-378558),r=p(r,n,i,o,t[a+8],11,-2022574463),o=p(o,r,n,i,t[a+11],16,1839030562),i=p(i,o,r,n,t[a+14],23,-35309556),n=p(n,i,o,r,t[a+1],4,-1530992060),r=p(r,n,i,o,t[a+4],11,1272893353),o=p(o,r,n,i,t[a+7],16,-155497632),i=p(i,o,r,n,t[a+10],23,-1094730640),n=p(n,i,o,r,t[a+13],4,681279174),r=p(r,n,i,o,t[a+0],11,-358537222),o=p(o,r,n,i,t[a+3],16,-722521979),i=p(i,o,r,n,t[a+6],23,76029189),n=p(n,i,o,r,t[a+9],4,-640364487),r=p(r,n,i,o,t[a+12],11,-421815835),o=p(o,r,n,i,t[a+15],16,530742520),i=p(i,o,r,n,t[a+2],23,-995338651),n=g(n,i,o,r,t[a+0],6,-198630844),r=g(r,n,i,o,t[a+7],10,1126891415),o=g(o,r,n,i,t[a+14],15,-1416354905),i=g(i,o,r,n,t[a+5],21,-57434055),n=g(n,i,o,r,t[a+12],6,1700485571),r=g(r,n,i,o,t[a+3],10,-1894986606),o=g(o,r,n,i,t[a+10],15,-1051523),i=g(i,o,r,n,t[a+1],21,-2054922799),n=g(n,i,o,r,t[a+8],6,1873313359),r=g(r,n,i,o,t[a+15],10,-30611744),o=g(o,r,n,i,t[a+6],15,-1560198380),i=g(i,o,r,n,t[a+13],21,1309151649),n=g(n,i,o,r,t[a+4],6,-145523070),r=g(r,n,i,o,t[a+11],10,-1120210379),o=g(o,r,n,i,t[a+2],15,718787259),i=g(i,o,r,n,t[a+9],21,-343485551),n=f(n,s),i=f(i,c),o=f(o,u),r=f(r,l)}return Array(n,i,o,r)}(function(t){for(var e=Array(),n=(1<<o)-1,i=0;i<t.length*o;i+=o)e[i>>5]|=(t.charCodeAt(i/o)&n)<<i%32;return e}(e=t),e.length*o)):""},Param:function(){var n=[],r={};this.parse=function(t){for(var e=t.split("&"),n=0,i=e.length;n<i;n++){var o=e[n].split("=");r[o[0]]=o[1]}return r},this.toString=function(t){return n.join(t=t||"&")},this.add=function(t,e){return n.push(t+"="+e),this}},Guid:function(){function t(){return(1048576*(1+Math.random())|0).toString(16)}return parseInt((new Date).getTime())+"-"+t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},getKey:function(){var t=d.Cookie.read("kg_open_key"),e="";if(window.Storage&&window.localStorage&&window.localStorage instanceof Storage&&(e=window.localStorage.getItem("kg_open_key"),t&&t!=e&&window.localStorage.setItem("kg_open_key",t)),!t&&e&&d.Cookie.write("kg_open_key",e,864e6,"/","kugou.com",!0,"None"),n=t||e)return n;var e=d.Guid(),n=d.Md5(e);try{d.Cookie.write("kg_open_key",d.Md5(e),864e6,"/","kugou.com"),window.localStorage.setItem("kg_open_key",t)}catch(t){}return n},getOpenId:function(){function t(){return(1048576*(1+Math.random())|0).toString(16)}return parseInt((new Date).getTime())+"-"+t()+"-"+t()}},u=function(n){r().then(function(t){var e=l({},e={a:1128960,b:"点击",ft:"拉端成功率",r:"端外页面点击拉端"},{},{kugouID:t.userid,mid:t.mid,uuid:t.uuid,appid:t.appid,version:t.clientver,dfid:t.dfid}),t=d.getOpenBIData();t&&(e.svar1=t.key,e.svar3=t.url,e.svar4=t.ua),n&&(e=l({},e,{},n)),s(e)})},h=function(n){r().then(function(t){var e=l({},e={a:1128958,b:"点击",ft:"拉端成功率",r:"端外拉端方法的中途步骤"},{},{kugouID:t.userid,mid:t.mid,uuid:t.uuid,appid:t.appid,version:t.clientver,dfid:t.dfid}),t=d.getOpenBIData();t&&(e.svar1=t.key,e.svar3=t.url,e.svar4=t.ua),n&&(e=l({},e,{},n)),s(e)})},p={id:"",setId:function(){p.id=d.getOpenId()},getId:function(){return p.id}},g=function(t,e,n,i,o){e=l({},e={cmd:t,jsonStr:i,type:e,action:n,openBIData:d.getOpenBIData()},{},o),n=encodeURIComponent(JSON.stringify(e)),o="kugou://start.weixin?"+n,e="kugouurl://start.weixin?"+n,n="",n=1==d.getSysBowser()[0]?o:e;window.location.href=n},f=function(t,e,n,i,o,r){var a=l({},a={cmd:t,jsonStr:i,type:e,action:n,openBIData:d.getOpenBIData()},{},o);d.initWXSign(function(){try{var t={is_start_weixin:!0,real_content:"kugou://start.weixin?"+JSON.stringify(a)};wx.invoke("launchApplication",{appID:"wx79f2c4418704b4f8",parameter:"kugouurl://start.weixin?"+encodeURIComponent(JSON.stringify(a)),extInfo:"kugouURL://start.fanxing?"+encodeURIComponent(JSON.stringify(t))},function(t){"launchApplication:ok"===t.err_msg||(t.err_msg,r&&r())})}catch(t){r&&r()}})},m=function(t,e,n,i,o){n={cmd:t,jsonStr:i,type:e,action:n,openBIData:d.getOpenBIData()};o&&(n.bizParam=o);n=encodeURIComponent(JSON.stringify(n));window.location.href="https://m3ws.kugou.com/share/weixin.html?data="+n},w=function(t,e,n,i){i?i.openBIData||(i.openBIData=d.getOpenBIData()):i={openBIData:d.getOpenBIData()};i=encodeURIComponent(JSON.stringify(i));window.location.href="https://mo.kugou.com/universal/?Type="+e+"&Action="+n+"&Json="+i},v=function(t,e,n,i,o,r,a){n=l({},n={cmd:t,jsonStr:i,type:e,action:n,openBIData:d.getOpenBIData()},{},a);o=o||"CK1350585625598";n="kugou://start.weixin?"+encodeURIComponent(JSON.stringify(n)),o="https://a.app.qq.com/o/simple.jsp?pkgname=com.kugou.android&ckey=".concat(o);window.location.href=r||"".concat(o,"&android_schema=").concat(n)},b=function(t,e,n,i,o){n={cmd:t,jsonStr:i,type:e,action:n,openBIData:d.getOpenBIData()},n=encodeURIComponent(JSON.stringify(n));window.location.href=(o||"https://itunes.apple.com/app/apple-store/id472208016?pt=624347&ct=schoolstar&mt=8")+"&android_schema="+("kugouurl://start.weixin?"+n)+"&schema_version=7950"},k=function(){var t=document.getElementById("pop_mask2");t?t.style.display="block":((t=document.createElement("div")).classList.add("pop_mask2"),t.setAttribute("style","width: 100%; height: 100%; z-index: 9999; position: fixed; top: 0; left: 0; display: none;"),t.setAttribute("id","pop_mask2"),document.body.appendChild(t),t.innerHTML='<img style="width: 100%; height: 100%; display: block;" src="https://webimg.kgimg.com/acf6178e56ecd99bee6b013d39061689.png"/>'),t.addEventListener("click",function(){this.style.display="none"},!1),t.style.display="block"},y=function(t){return window.location.href="http://downmobile.kugou.com/promote/package/download/channel="+t,null};navigator.userAgent.toLocaleLowerCase();var S=2==d.getSysBowser()[1],C=3==d.getSysBowser()[1],I=4==d.getSysBowser()[1],x=2==d.getSysBowser()[0]||3==d.getSysBowser()[0],j=7==d.getSysBowser()[1];S&&d.initWXSign();var A=function(t,e,n,i,o,r){var a=6<arguments.length&&void 0!==arguments[6]?arguments[6]:{};d.isWechatWhiteList()?x&&a.useUniversalLinkInWeixin?(h({svar2:"",svar5:"wx1",svar6:p.getId()}),w(t,e,n,i)):(h({svar2:"",svar5:"wx2",svar6:p.getId()}),f(t,e,n,i,a.bizParam,function(){return h({svar2:"",svar5:"wx3",svar6:p.getId()}),k(),null})):x&&"cmd"==o?(h({svar2:"",svar5:"wx4",svar6:p.getId()}),m(t,e,n,i,a.bizParam)):x?(h({svar2:"",svar5:"wx5",svar6:p.getId()}),w(t,e,n,i)):(h({svar2:"",svar5:"wx6",svar6:p.getId()}),m(t,e,n,i,a.bizParam))},O=function(t,e,n,i,o,r){var a=6<arguments.length&&void 0!==arguments[6]?arguments[6]:{};if(x){if("mokugou"==o)return h({svar2:"",svar5:"qq1",svar6:p.getId()}),w(t,e,n,i),null;h({svar2:"",svar5:"qq2",svar6:p.getId()}),g(t,e,n,i,a.bizParam),d.checkOpen(function(){h({svar2:"",svar5:"qq3",svar6:p.getId()}),b(t,e,n,i,a.iosAppstoreUrl)})}else h({svar2:"",svar5:"qq4",svar6:p.getId()}),g(t,e,n,i,a.bizParam),d.checkOpen(function(){h({svar2:"",svar5:"qq5",svar6:p.getId()}),v(t,e,n,i,r,a.androidDownLoadLink,a.bizParam)})},P=function(t,e,n,i,o,r){var a=6<arguments.length&&void 0!==arguments[6]?arguments[6]:{};if(x){if("mokugou"==o)return h({svar2:"",svar5:"wb1",svar6:p.getId()}),k(),null;h({svar2:"",svar5:"wb2",svar6:p.getId()}),g(t,e,n,i,a.bizParam)}else h({svar2:"",svar5:"wb3",svar6:p.getId()}),g(t,e,n,i,a.bizParam),d.checkOpen(function(){var t="271";a&&a.chi&&(t=a.chi),h({svar2:"",svar5:"wb4",svar6:p.getId()}),y(t)})},N=function(t,e,n,i,o,r){k(),h({svar2:"",svar5:"wxw1",svar6:p.getId()})},M=function(t,e,n,i,o,r){var a=6<arguments.length&&void 0!==arguments[6]?arguments[6]:{};x?"cmd"==o?(h({svar2:"",svar5:"other1",svar6:p.getId()}),g(t,e,n,i,a.bizParam),d.checkOpen(function(){h({svar2:"",svar5:"other2",svar6:p.getId()}),b(t,e,n,i,a.iosAppstoreUrl)})):(h({svar2:"",svar5:"other3",svar6:p.getId()}),w(t,e,n,i)):(h({svar2:"",svar5:"other4",svar6:p.getId()}),g(t,e,n,i,a.bizParam),d.checkOpen(function(){h({svar2:"",svar5:"other5",svar6:p.getId()}),v(t,e,n,i,r,a.androidDownLoadLink,a.bizParam)}))};return function(t,e,n,i,o,r){var a=6<arguments.length&&void 0!==arguments[6]?arguments[6]:{},s=t;p.setId(),t&&"[object Object]"===Object.prototype.toString.call(t)?(function(t){var e=t.cmd,n=t.type,i=t.action,o=t.params||t.param,r=t.launchWay,a=t.ckey,s=t.bizParam,c=l({},t);e&&delete c.cmd,n&&delete c.type,i&&delete c.action,o&&delete c.params,r&&delete c.launchWay,a&&delete c.ckey;var u=c;u&&u.friendship&&(t=d.getUrlParam("u"),c=d.getUrlParam("kgsscty1"),t&&o&&!o.u&&(o.u=t),c&&o&&!o.kgsscty1&&(o.kgsscty1=c)),s&&(u.bizParam=s),S?A(e,n,i,o,r,a,u):C?O(e,n,i,o,r,a,u):I?P(e,n,i,o,r,a,u):j?N():M(e,n,i,o,r,a,u)}(t),s=t.cmd):function(t,e,n,i,o,r){var a,s,c=6<arguments.length&&void 0!==arguments[6]?arguments[6]:{};c&&c.friendship&&(a=d.getUrlParam("u"),s=d.getUrlParam("kgsscty1"),a&&i&&!i.u&&(i.u=a),s&&i&&!i.kgsscty1&&(i.kgsscty1=s)),S?A(t,e,n,i,o,r,c):C?O(t,e,n,i,o,r,c):I?P(t,e,n,i,o,r,c):j?N():M(t,e,n,i,o,r,c)}(t,e,n,i,o,r,a),u({svar2:"",svar5:p.getId(),svar6:s}),h({svar2:"",svar5:"start",svar6:p.getId()})}});
//# sourceMappingURL=main.min.js.map
