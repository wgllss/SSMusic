function lazyloadReplaceHttpsImg(imgUrl){if(!imgUrl){return 0}if(~imgUrl.indexOf("https://")){return imgUrl}var httpsUrl="",imgMapHttps=[["https://imgessl.kugou.com",["http://imge.kugou.com","http://imgessl.kugou.com","http://singerimg.kugou.com","http://c0.kgimg.com","http://c1.kgimg.com","http://c2.kgimg.com","http://c3.kgimg.com","http://c4.kgimg.com","http://c5.kgimg.com","http://c6.kgimg.com","http://c7.kgimg.com","http://c8.kgimg.com","http://c9.kgimg.com"]],["https://webimg.kgimg.com",["http://webimg.bssdl.kugou.com"]],["https://mobileservicebssdl.kugou.com",["http://mobileservice.bssdl.kugou.com"]],["https://mwebbssdl.kugou.com",["http://mweb.bssdl.kugou.com"]],["https://schoolimgbssdl.kugou.com",["http://schoolimg.bssdl.kugou.com"]],["https://activitybssdl.kugou.com",["http://activity.bssdl.kugou.com"]],["https://adsfile.kugou.com",["http://adsfile.bssdlbig.kugou.com"]],["https://imgacsing.kugou.com",["http://img.acsing.kugou.com"]],["https://s10.fxwork.kugou.com",["http://s10.fxwork.fanxing.kugou.com","http://s10.fxwork.fanxing.com","http://s10.fxwork.kugou.com"]],["https://p3fx.kgimg.com",["http://imge.kugou.com","http://s3.fx.kgimg.com"]],["https://s4fx.kgimg.com",["http://s4fx.kgimg.com"]],["https://m3ws.kugou.com",["http://m.kugou.com"]],["https://ep.kugou.com",["http://zhuanjistatic.kugou.com"]],["https://$13fx.kgimg.com",[/^http:\/\/([sp])[1-5]\.fx\.(kgimg)\.com/,/^http:\/\/([sp])[1-5]\.fanxing\.com/]]];imgMapHttps.forEach(function(item){var list=item[1],replaceHttps=item[0];list.forEach(function(it){if(typeof it==="object"&&it.test(imgUrl)){httpsUrl=imgUrl.replace(it,replaceHttps)}else{if(~imgUrl.indexOf(it)){httpsUrl=imgUrl.replace(it,replaceHttps)}}return !httpsUrl});return !httpsUrl});return httpsUrl||imgUrl}function Lazyload(option){this.setOption(option);var imgs=document.images;var _this=this;this.lazyImgs=[];this.push();if(this.option.scroll){this.timer=setInterval(function(){var l=_this.lazyImgs.length;var size=Kg.getBodySize();var arr=[];if(_this.option.iframe){var iframe=parent.document.getElementById(_this.option.iframeId);for(var i=0;i<_this.lazyImgs.length;i++){if(_this.lazyImgs[i].offsetHeight<=0){continue}if((_this.lazyImgs[i].getBoundingClientRect().top+iframe.getBoundingClientRect().top)<=(iframe.parentNode.clientHeight-1+iframe.parentNode.getBoundingClientRect().top)){arr.push(_this.lazyImgs[i]);_this.lazyImgs.splice(i,1);i--;continue}}}else{for(var i=0;i<_this.lazyImgs.length;i++){if(_this.lazyImgs[i].offsetHeight<=0){continue}if(_this.lazyImgs[i].getBoundingClientRect().top<=(size.cH-1)){arr.push(_this.lazyImgs[i]);_this.lazyImgs.splice(i,1);i--;continue}}}_this.loadPic(arr)},100)}else{this.loadPic(this.lazyImgs)}}Lazyload.prototype.push=function(arr){var imgs=document.images;var _this=this;for(var i=0;i<imgs.length;i++){var relSrc=imgs[i].getAttribute(this.option.realSrc);if(relSrc!=undefined&&(relSrc!=imgs[i].src)){this.lazyImgs.push(imgs[i]);imgs[i].onerror=function(){this.onerror=null;var defSrc=this.getAttribute(_this.option.defaultSrc);if(defSrc){this.src=defSrc}this.className=this.className.replace(/\bload\b/g,"");this.className=this.className.replace(/\bloadPic\b/g,"");this.setAttribute("iserror",1)};imgs[i].onload=function(){if(this.getAttribute(_this.option.realSrc)==this.src||(this.getAttribute("iserror")!=1&&this.getAttribute(_this.option.defaultSrc,2)==this.getAttribute("src",2))){this.className=this.className.replace(/\bload\b/g,"");this.className=this.className.replace(/\bloadPic\b/g,"");if(_this.option.fadeIn){Kg.setOpacity(this,0);Kg.fadein(this,1,7,function(o){o.style.filter="";o.style.opacity=""})}}}}}};Lazyload.prototype.loadPic=function(arr){for(var i=0,l=arr.length;i<l;i++){if(arr[i].getAttribute("loading")==1){continue}arr[i].src=lazyloadReplaceHttpsImg(arr[i].getAttribute(this.option.realSrc))||lazyloadReplaceHttpsImg(arr[i].getAttribute(this.option.defaultSrc))||"";arr[i].setAttribute("loading",1);arr[i].className+=" loadPic"}};Lazyload.prototype.setOption=function(option){this.option={realSrc:"_src",defaultSrc:"_def",scroll:true,iframe:false,fadeIn:false,iframeId:null};Kg.extend(this.option,option||{},true)};